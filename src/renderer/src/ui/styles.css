/* Modern macOS (Sonoma‑style) look — Windows friendly.
   Никаких внешних библиотек: только CSS + системные шрифты.
*/

:root{
  --bg: #f2f2f7;
  --bg2: #fbfbfd;
  --surface: rgba(255,255,255,.78);
  --surfaceSolid: #ffffff;
  --text: #1c1c1e;
  --muted: rgba(60,60,67,.72);
  --hairline: rgba(60,60,67,.20);
  --hairline2: rgba(60,60,67,.12);
  --shadow: 0 18px 50px rgba(0,0,0,.12);
  --shadowSoft: 0 8px 22px rgba(0,0,0,.10);

  --blue: #0a84ff;
  --blue2: rgba(10,132,255,.14);
  --green: #34c759;
  --red: #ff3b30;

  --radius: 18px;
  --radius2: 14px;
  --focus: 0 0 0 4px rgba(10,132,255,.22);
}

*{ box-sizing: border-box; }
html, body { height: 100%; }

body{
  margin: 0;
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI Variable", "Segoe UI", system-ui, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
  font-size: 14px;
  line-height: 1.35;
  background:
    radial-gradient(1100px 700px at 15% 0%, rgba(10,132,255,.12), transparent 55%),
    radial-gradient(900px 550px at 85% 0%, rgba(52,199,89,.10), transparent 55%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg2) 60%, var(--bg) 100%);
}

a{ color: inherit; text-decoration: none; }

.appShell{ min-height: 100%; display: flex; flex-direction: column; }

.pageArea{ flex: 1; min-height: 0; overflow: hidden; }

.container{
  max-width: none;
  margin: 0;
  padding: 18px 18px 26px;
  height: 100%;
  overflow: auto;
}

/* прячем системный вертикальный скролл страницы — скроллим только контент */
.container::-webkit-scrollbar { height: 10px; width: 10px; }
.container::-webkit-scrollbar-thumb { background: rgba(0,0,0,.20); border-radius: 999px; border: 2px solid rgba(255,255,255,.75); }
.container::-webkit-scrollbar-track { background: rgba(0,0,0,.04); border-radius: 999px; }


/* Full-width content area (used for Products page table) */
.containerWide{
  max-width: none;
  overflow: hidden;
}

/* Topbar */
.topbar{
  position: sticky;
  top: 0;
  z-index: 60;
  background: rgba(242,242,247,.72);
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
  border-bottom: 1px solid var(--hairline2);
}

.topbarInner{
  max-width: none;
  margin: 0 auto;
  padding: 12px 18px;
  display: flex;
  align-items: center;
  gap: 14px;
}

.appTitle{
  display: inline-flex;
  align-items: baseline;
  gap: 10px;
  padding: 6px 10px;
  border-radius: 12px;
}

.appName{
  font-size: 20px;
  font-weight: 820;
  letter-spacing: -0.02em;
}

.appStoreName{
  font-size: 13px;
  font-weight: 650;
  color: rgba(60,60,67,.78);
  letter-spacing: 0;
}

.segCount{
  margin-left: 8px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(60,60,67,.14);
  background: rgba(255,255,255,.72);
  color: rgba(60,60,67,.78);
  font-size: 12px;
  font-weight: 650;
}

.topbarSearch{
  display: inline-flex;
  align-items: center;
}

.appNameLink{
  font-size: 20px;
  font-weight: 820;
  letter-spacing: -0.02em;
  padding: 6px 10px;
  border-radius: 12px;
  transition: background .16s ease, transform .12s ease;
}

.appNameLink:hover{ background: rgba(255,255,255,.55); transform: translateY(-1px); }
.appNameLink:active{ transform: translateY(0px) scale(.99); }

.topbarSlot{
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  flex-wrap: wrap;
  min-width: 260px;
}

.topbarRight{
  display: flex;
  align-items: center;
  gap: 10px;
}

.navChip{
  display: inline-flex;
  align-items: center;
  height: 34px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.78);
  color: rgba(28,28,30,.88);
  text-decoration: none;
  font-weight: 650;
}

.navChip.active{
  background: #fff;
  box-shadow: var(--shadowSoft);
}

.iconLink,
.iconBtn{
  width: 36px;
  height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.78);
  color: rgba(28,28,30,.78);
}

.iconLink{ text-decoration:none; }

.iconLink.active{
  background: #fff;
  box-shadow: var(--shadowSoft);
}

.iconBtn{
  cursor: pointer;
}

.iconBtn:disabled{
  opacity: .6;
  cursor: default;
}

.syncIndicator{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,.08);
  background: #2ecc71;
}

.syncIndicator.running{ background: #2d7ff9; animation: pulse 1.2s ease-in-out infinite; }
.syncIndicator.offline{ background: #ff4d4f; }
.syncIndicator.error{ background: #ff9500; }
.syncIndicator.ok{ background: #2ecc71; }

.topbarActions{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

/* Segmented control */
.segmented{
  display: inline-flex;
  align-items: center;
  padding: 4px;
  gap: 4px;
  border-radius: 999px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.66);
  box-shadow: 0 1px 0 rgba(255,255,255,.65) inset, var(--shadowSoft);
}

.segmented a{
  min-width: 110px;
  text-align: center;
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 600;
  color: rgba(28,28,30,.84);
  transition: transform .12s ease, background .16s ease, color .16s ease, box-shadow .16s ease;
}

.segmented a:hover{
  background: rgba(255,255,255,.85);
  transform: translateY(-1px);
}

.segmented a:active{ transform: translateY(0px) scale(.99); }

.segmented a.active{
  background: rgba(255,255,255,.95);
  color: var(--text);
  box-shadow: 0 10px 28px rgba(10,132,255,.18);
  border: 1px solid rgba(10,132,255,.28);
}

/* Cards */
.card{
  background: var(--surface);
  border: 1px solid var(--hairline2);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 18px;
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
}

.h1{
  font-size: 20px;
  font-weight: 760;
  letter-spacing: -0.02em;
}

.muted{ color: var(--muted); }
.small{ font-size: 12px; color: var(--muted); }

/* Forms */
.row{ display: flex; gap: 12px; }
.col{ flex: 1; }

.field label{
  display: block;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
}

input{
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.92);
  outline: none;
  transition: box-shadow .16s ease, border-color .16s ease;
}

input:focus{
  border-color: rgba(10,132,255,.55);
  box-shadow: var(--focus);
}

button{
  border-radius: 999px;
  padding: 10px 14px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.78);
  cursor: pointer;
  box-shadow: 0 1px 0 rgba(255,255,255,.65) inset, var(--shadowSoft);
  color: rgba(28,28,30,.92);
  transition: transform .12s ease, background .16s ease, border-color .16s ease, opacity .16s ease;
}

button:hover{
  background: rgba(255,255,255,.92);
  border-color: rgba(60,60,67,.26);
  transform: translateY(-1px);
}

button:active{ transform: translateY(0px) scale(.99); }

button:disabled{
  opacity: .55;
  cursor: not-allowed;
  transform: none;
}

.primary{
  border-color: rgba(10,132,255,.62);
  background: linear-gradient(180deg, rgba(10,132,255,1), rgba(0,122,255,1));
  color: #fff;
  box-shadow: 0 1px 0 rgba(255,255,255,.25) inset, 0 18px 50px rgba(10,132,255,.22);
}

.primary:hover{
  background: linear-gradient(180deg, rgba(18,150,255,1), rgba(0,118,255,1));
  border-color: rgba(10,132,255,.75);
}

.badge, .pill{
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.72);
  font-size: 12px;
  color: rgba(28,28,30,.82);
  box-shadow: 0 1px 0 rgba(255,255,255,.55) inset;
}

.notice{
  margin-top: 12px;
  padding: 11px 12px;
  border-radius: var(--radius2);
  border: 1px solid rgba(10,132,255,.22);
  background: rgba(10,132,255,.08);
}

.notice.error{
  border-color: rgba(255,59,48,.25);
  background: rgba(255,59,48,.08);
}


.statusText{
  font-weight: 650;
}
.statusText.success{ color: var(--green); }
.statusText.error{ color: var(--red); }
.statusText.pending{ color: rgba(60,60,67,.75); }

/* Products page */
.productsCard{
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}
.productsTableArea{ display:flex; flex-direction:column; flex:1; min-height:0; }
.search{ min-width: 310px; }
.searchInput{ padding-left: 12px; }

/* Status dot */
.syncDot{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(0,0,0,.08);
  background: rgba(60,60,67,.24);
  box-shadow: 0 1px 0 rgba(255,255,255,.45) inset;
}

.syncDot.ok{ background: var(--green); }
.syncDot.offline{ background: rgba(60,60,67,.44); }

.syncDot.running{
  background: var(--green);
  animation: pulse 1.1s ease-in-out infinite;
}

.syncSpinner{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,.50);
  border-top-color: rgba(255,255,255,1);
  animation: spin .75s linear infinite;
}

.syncCheck{
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: rgba(255,255,255,.92);
  opacity: .85;
}

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse {
  0%, 100% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.08); filter: brightness(1.06); }
}

/* Tables */
.tableWrap{
  margin-top: 14px;
  display: flex;
  flex-direction: column;
  border: 1px solid var(--hairline2);
  border-radius: var(--radius);
  overflow: hidden;
  background: rgba(255,255,255,.80);
  box-shadow: 0 1px 0 rgba(255,255,255,.55) inset;
}

.tableWrapX{
  overflow-x: auto;
  overflow-y: hidden;
  flex: 1;
  min-height: 0;
}

.tableWrapY{
  overflow-y: auto;
  overflow-x: hidden;
  height: 100%;
}

/* Scrollbars */
.tableWrapX::-webkit-scrollbar, .tableWrapY::-webkit-scrollbar { height: 10px; width: 10px; }
.tableWrapX::-webkit-scrollbar-thumb, .tableWrapY::-webkit-scrollbar-thumb { background: rgba(0,0,0,.20); border-radius: 999px; border: 2px solid rgba(255,255,255,.75); }
.tableWrapX::-webkit-scrollbar-track, .tableWrapY::-webkit-scrollbar-track { background: rgba(0,0,0,.04); border-radius: 999px; }


.table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 13px;
}

.table th, .table td{
  padding: 11px 12px;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
}

.table th{
  position: sticky;
  top: 0;
  z-index: 2;
  background: rgba(251,251,253,.92);
  border-bottom: 1px solid var(--hairline2);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  color: rgba(28,28,30,.88);
  font-weight: 700;
}

.table td{ border-top: 1px solid rgba(60,60,67,.10); }

.table tr:nth-child(even) td{ background: rgba(0,0,0,.012); }
.table tr:hover td{ background: var(--blue2); }

.empty{
  padding: 18px 12px;
  color: var(--muted);
}

/* Column header tools */
.thDraggable{ position: relative; user-select: none; }
.thInner{ display: flex; align-items: center; gap: 8px; min-height: 28px; }
.thGrip{ margin-left: auto; color: rgba(0,0,0,.30); font-size: 14px; cursor: grab; }

.colToggle{
  width: 16px;
  height: 16px;
  padding: 0;
  border-radius: 999px;
  border: 1px solid rgba(60,60,67,.18);
  background: rgba(255,255,255,.90);
  color: rgba(28,28,30,.72);
  font-size: 12px;
  line-height: 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform .12s ease, background .16s ease;
}

.colToggle:hover{ background: rgba(255,255,255,1); transform: translateY(-1px); }
.colToggle:active{ transform: translateY(0) scale(.99); }

/* Collapsed columns bar */
.collapsedBar{
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 10px;
}

.chip{
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--hairline);
  background: rgba(255,255,255,.70);
}

@media (max-width: 860px){
  .search{ min-width: 220px; }
  .productsCard{ height: auto; }
}

@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; animation: none !important; }
}

/* --- Products table UX fixes: no text overlap, resize handle, drop indicator --- */

.tableFixed{ table-layout: fixed; }

.cellText{
  overflow: hidden;
  text-overflow: ellipsis;
}

.thResizer{
  position: absolute;
  top: 0;
  right: 0;
  width: 10px;
  height: 100%;
  cursor: col-resize;
}

.thResizer::after{
  content: '';
  position: absolute;
  top: 6px;
  bottom: 6px;
  left: 4px;
  width: 2px;
  border-radius: 2px;
  background: rgba(60,60,67,.25);
}

.thDragging{ opacity: .55; }

.thDropLeft::before,
.thDropRight::before{
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--blue);
}

.thDropLeft::before{ left: 0; }
.thDropRight::before{ right: 0; }

/* --- Sync button indicator: centered and larger --- */

.syncBtn{
  position: relative;
}

.syncBtnDot{
  width: 20px;
  height: 20px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(60,60,67,.25);
}

.syncBtnDot.ok{ background: var(--green); }
.syncBtnDot.offline{ background: rgba(60,60,67,.35); }
.syncBtnDot.error{ background: var(--red); }
.syncBtnDot.running{ background: var(--green); animation: pulse 1.2s ease-in-out infinite; }

.syncSpinner{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,.65);
  border-top-color: rgba(255,255,255,0);
  animation: spin 1s linear infinite;
}

.syncCheck{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: white;
}
